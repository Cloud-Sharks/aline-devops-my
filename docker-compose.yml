version: '3'

services:
  aline_db:
    image: myates7748/aline-db:v1.0
    container_name: aline-db
    ports:
      - 3307:3306
    networks:
      - aline_nw

  bank-ms:
    image: myates7748/bank-ms:v1.1
    container_name: bank-ms
    depends_on:
      - aline_db
    restart: on-failure:3
    env_file:
      - dev_setup.env
    ports:
      - 8083:8083
    networks:
      - aline_nw

  transaction-ms:
    image: myates7748/transaction-ms:v1.1
    container_name: transaction-ms
    depends_on:
      - aline_db
    restart: on-failure:3
    env_file:
      - dev_setup.env
    ports:
      - 8073:8073
    networks:
      - aline_nw

  underwriter-ms:
    image: myates7748/underwriter-ms:v1.1
    container_name: underwriter-ms
    depends_on:
      - aline_db
    restart: on-failure:3
    env_file:
      - dev_setup.env
    ports:
      - 8071:8071
    networks:
      - aline_nw

  user-ms:
    image: myates7748/user-ms:v1.1
    container_name: user-ms
    depends_on:
      - aline_db
    restart: on-failure:3
    env_file:
      - dev_setup.env
    ports:
      - 8070:8070
    networks:
      - aline_nw

  aline-gateway:
    image: myates7748/aline-gateway:v1.2
    container_name: aline-gateway
    env_file:
      - dev_setup.env
    ports:
      - 8080:8080
    networks:
      - aline_nw

  landing-portal:
    image: myates7748/landing-portal:v1.0
    container_name: landing-portal
    depends_on:
      - aline-gateway
    env_file:
      - dev_setup.env
    ports:
      - 3007:3007
    networks:
      - aline_nw

  member-dash:
    image: myates7748/member-dash:v1.0
    container_name: member-dash
    depends_on:
      - aline-gateway
    env_file:
      - dev_setup.env
    ports:
      - 4200:4200
    networks:
      - aline_nw

  admin-portal:
    image: myates7748/admin-portal:v1.0
    container_name: admin-portal
    depends_on:
      - aline-gateway
    env_file:
      - dev_setup.env
    ports:
      - 3000:3000
    networks:
      - aline_nw

networks:
  aline_nw:
    name: aline